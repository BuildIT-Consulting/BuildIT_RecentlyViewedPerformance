"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["build-i-t--recently-viewed-performance"],{8206:(e,t,i)=>{var s,n,o,a=i(6285),r=i(6656),c=i(8553);class l extends a.Z{init(){this.setup(),this.addListeners()}setup(){this.storage=r.Z,document.$emitter.subscribe(c.Du,this.onUpdate.bind(this))}isCookieAllowed(){return null!==this.storage.getItem(this.options.storageName)}async addListeners(){if(!this.isCookieAllowed())return;const e=document.getElementsByClassName("product-detail"),t=document.querySelector('.cms-page[itemtype="https://schema.org/Product"]');if(e.length>0||t){this.updateView();const e=document.querySelector(".product-detail-name").innerText;let t="";document.querySelector("#tns1-item0")?(await(i=1500,s=document.querySelector("#tns1-item0 img"),new Promise(((e,t)=>{const n=()=>{s.src.startsWith("data")?(i-=100)<0?t():setTimeout(n,100):e()};setTimeout(n,100)}))),t=document.querySelector("#tns1-item0 img").src):t=document.querySelector(".product-detail-media img").src;const n=document.location.href;let o="";if(document.querySelector('meta[itemprop="lowPrice"]')){const e=document.querySelector('meta[itemprop="lowPrice"]').content.replace(/\D/g,"");for(let t of document.querySelectorAll(".product-block-prices-cell div"))t.innerHTML.replace(/\D/g,"").includes(e)&&(o=this.el.dataset.fromText+" "+t.innerHTML.trim())}else o=document.querySelector(".product-detail-price").innerText;const a=new Date,r={name:e,image:t,link:n,price:o,expiry:a.getTime()+this.options.ttl},c=this.getFromStorage()||[],l=c.filter((t=>t.name===e)).length>0;(!l||l&&c.at(-1).name!==e)&&(c.length>=5&&c.shift(),c.push(r),this.addToStorage(c)),this.updateView()}var i,s}addToStorage(e){return e?this.storage.setItem(this.options.storageName,JSON.stringify(e)):this.storage.removeItem(this.options.storageName)}getFromStorage(){let e=null;const t=new Date;this.isCookieAllowed()&&(e=JSON.parse(this.storage.getItem(this.options.storageName)));return(e?e.filter((e=>e.expiry>=t.getTime())):[]).length<1?(this.addToStorage(null),[]):e}onUpdate(e){e.detail[this.options.storageName]&&(this.hasCookieAllowed=!0,this.storage.setItem(this.options.storageName,JSON.stringify([])))}updateView(){const e=this.getFromStorage();if(e&&e.length>=1){document.querySelector(".buildit_recently_viewed_tabs").style.display="block",document.querySelector(".product-detail-recently-viewed-text").querySelectorAll("*").forEach((e=>e.remove()));for(let t of e){let e=document.createElement("div");e.className="recently_viewed_wrapper",e.innerHTML=`\n                    <a href="${t.link}" title="${t.name}" alt="${t.name}" title="${t.name}">\n                        <img src="${t.image}" title="${t.name}" alt="${t.name}" title="${t.name}">\n                    </a>\n                    <a href="${t.link}" class="product-name" title="${t.name}" alt="${t.name}" title="${t.name}">\n                        ${t.name}\n                    </a>\n                    <p class="product-price">${t.price}</p>`,document.querySelector(".product-detail-recently-viewed-text").appendChild(e)}}else document.querySelector(".buildit_recently_viewed_tabs").style.display="none"}}s=l,o={storageName:"buildit_recently_viewed_storage",ttl:864e5,isCookieAllowed:!1},(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(n="options"))in s?Object.defineProperty(s,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[n]=o;window.PluginManager.register("RecentlyViewedPlugin",l,"[data-recently-viewed-plugin]")},8553:(e,t,i)=>{i.d(t,{Du:()=>f,UK:()=>u,ZP:()=>d});var s=i(6285),n=i(7606),o=i(2615),a=i(3637),r=i(7474),c=i(8254),l=i(4690);const f="CookieConfiguration_Update",u="CookieConfiguration_CloseOffCanvas";class d extends s.Z{init(){this.lastState={active:[],inactive:[]},this._httpClient=new c.Z,this._registerEvents()}_registerEvents(){const{submitEvent:e,buttonOpenSelector:t,customLinkSelector:i,globalButtonAcceptAllSelector:s}=this.options;Array.from(document.querySelectorAll(t)).forEach((t=>{t.addEventListener(e,this.openOffCanvas.bind(this))})),Array.from(document.querySelectorAll(i)).forEach((t=>{t.addEventListener(e,this._handleCustomLink.bind(this))})),Array.from(document.querySelectorAll(s)).forEach((t=>{t.addEventListener(e,this._acceptAllCookiesFromCookieBar.bind(this))}))}_registerOffCanvasEvents(){const{submitEvent:e,buttonSubmitSelector:t,buttonAcceptAllSelector:i,wrapperToggleSelector:s}=this.options,o=this._getOffCanvas();if(o){const a=o.querySelector(t),r=o.querySelector(i),c=Array.from(o.querySelectorAll('input[type="checkbox"]')),l=Array.from(o.querySelectorAll(s));a&&a.addEventListener(e,this._handleSubmit.bind(this,n.Z)),r&&r.addEventListener(e,this._acceptAllCookiesFromOffCanvas.bind(this,n.Z)),c.forEach((t=>{t.addEventListener(e,this._handleCheckbox.bind(this))})),l.forEach((t=>{t.addEventListener(e,this._handleWrapperTrigger.bind(this))}))}}_handleCustomLink(e){e.preventDefault(),this.openOffCanvas()}_handleUpdateListener(e,t){const i=this._getUpdatedCookies(e,t);document.$emitter.publish(f,i)}_getUpdatedCookies(e,t){const{lastState:i}=this,s={};return e.forEach((e=>{i.inactive.includes(e)&&(s[e]=!0)})),t.forEach((e=>{i.active.includes(e)&&(s[e]=!1)})),s}openOffCanvas(e){const{offCanvasPosition:t}=this.options,i=window.router["frontend.cookie.offcanvas"],s=r.Z.isXS();this._hideCookieBar(),o.Z.open(i,!1,this._onOffCanvasOpened.bind(this,e),t,void 0,void 0,s)}closeOffCanvas(e){o.Z.close(),"function"==typeof e&&e()}_onOffCanvasOpened(e){this._registerOffCanvasEvents(),this._setInitialState(),this._setInitialOffcanvasState(),PluginManager.initializePlugins(),"function"==typeof e&&e()}_hideCookieBar(){const e=PluginManager.getPluginInstances("CookiePermission");e&&e[0]&&(e[0]._hideCookieBar(),e[0]._removeBodyPadding())}_setInitialState(e=null){const t=e||this._getCookies("all"),i=[],s=[];t.forEach((({cookie:e,required:t})=>{n.Z.getItem(e)||t?i.push(e):s.push(e)})),this.lastState={active:i,inactive:s}}_setInitialOffcanvasState(){const e=this.lastState.active,t=this._getOffCanvas();e.forEach((e=>{const i=t.querySelector(`[data-cookie="${e}"]`);i.checked=!0,this._childCheckboxEvent(i)}))}_handleWrapperTrigger(e){e.preventDefault();const{entriesActiveClass:t,entriesClass:i,groupClass:s}=this.options,{target:n}=e,o=this._findParentEl(n,i,s);if(o){o.classList.contains(t)?o.classList.remove(t):o.classList.add(t)}}_handleCheckbox(e){const{parentInputClass:t}=this.options,{target:i}=e;(i.classList.contains(t)?this._parentCheckboxEvent:this._childCheckboxEvent).call(this,i)}_findParentEl(e,t,i=null){for(;e&&!e.classList.contains(i);){if(e.classList.contains(t))return e;e=e.parentElement}return null}_isChecked(e){return!!e.checked}_parentCheckboxEvent(e){const{groupClass:t}=this.options,i=this._isChecked(e),s=this._findParentEl(e,t);this._toggleWholeGroup(i,s)}_childCheckboxEvent(e){const{groupClass:t}=this.options,i=this._isChecked(e),s=this._findParentEl(e,t);this._toggleParentCheckbox(i,s)}_toggleWholeGroup(e,t){Array.from(t.querySelectorAll("input")).forEach((t=>{t.checked=e}))}_toggleParentCheckbox(e,t){const{parentInputSelector:i}=this.options,s=Array.from(t.querySelectorAll(`input:not(${i})`)),n=Array.from(t.querySelectorAll(`input:not(${i}):checked`));if(s.length>0){const e=t.querySelector(i);if(e){const t=n.length>0,i=t&&n.length!==s.length;e.checked=t,e.indeterminate=i}}}_handleSubmit(){const e=this._getCookies("active"),t=this._getCookies("inactive"),{cookiePreference:i}=this.options,s=[],o=[];t.forEach((({cookie:e})=>{o.push(e),n.Z.getItem(e)&&n.Z.removeItem(e)})),e.forEach((({cookie:e,value:t,expiration:i})=>{s.push(e),e&&t&&n.Z.setItem(e,t,i)})),n.Z.setItem(i,"1","30"),this._handleUpdateListener(s,o),this.closeOffCanvas(document.$emitter.publish(u))}acceptAllCookies(e=!1){if(!e)return this._handleAcceptAll(),void this.closeOffCanvas();l.Z.create(this.el);const t=window.router["frontend.cookie.offcanvas"];this._httpClient.get(t,(e=>{const t=(new DOMParser).parseFromString(e,"text/html");this._handleAcceptAll(t),l.Z.remove(this.el),this._hideCookieBar()}))}_acceptAllCookiesFromCookieBar(){return this.acceptAllCookies(!0)}_acceptAllCookiesFromOffCanvas(){return this.acceptAllCookies()}_handleAcceptAll(e=null){const t=this._getCookies("all",e);this._setInitialState(t);const{cookiePreference:i}=this.options;t.forEach((({cookie:e,value:t,expiration:i})=>{e&&t&&n.Z.setItem(e,t,i)})),n.Z.setItem(i,"1","30"),this._handleUpdateListener(t.map((({cookie:e})=>e)),[])}_getCookies(e="all",t=null){const{cookieSelector:i}=this.options;return t||(t=this._getOffCanvas()),Array.from(t.querySelectorAll(i)).filter((t=>{switch(e){case"all":return!0;case"active":return this._isChecked(t);case"inactive":return!this._isChecked(t);default:return!1}})).map((e=>{const{cookie:t,cookieValue:i,cookieExpiration:s,cookieRequired:n}=e.dataset;return{cookie:t,value:i,expiration:s,required:n}}))}_getOffCanvas(){const e=a.Z?a.Z.getOffCanvas():[];return!!(e&&e.length>0)&&e[0]}}var h,p,v;h=d,p="options",v={offCanvasPosition:"left",submitEvent:"click",cookiePreference:"cookie-preference",cookieSelector:"[data-cookie]",buttonOpenSelector:".js-cookie-configuration-button button",buttonSubmitSelector:".js-offcanvas-cookie-submit",buttonAcceptAllSelector:".js-offcanvas-cookie-accept-all",globalButtonAcceptAllSelector:".js-cookie-accept-all-button",wrapperToggleSelector:".offcanvas-cookie-entries span",parentInputSelector:".offcanvas-cookie-parent-input",customLinkSelector:`[href="${window.router["frontend.cookie.offcanvas"]}"]`,entriesActiveClass:"offcanvas-cookie-entries--active",entriesClass:"offcanvas-cookie-entries",groupClass:"offcanvas-cookie-group",parentInputClass:"offcanvas-cookie-parent-input"},(p=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(p))in h?Object.defineProperty(h,p,{value:v,enumerable:!0,configurable:!0,writable:!0}):h[p]=v},2615:(e,t,i)=>{i.d(t,{Z:()=>r});var s=i(3637),n=i(8254),o=i(7906);let a=null;class r extends s.Z{static open(e=!1,t=!1,i=null,n="left",o=!0,a=s.Z.REMOVE_OFF_CANVAS_DELAY(),r=!1,c=""){if(!e)throw new Error("A url must be given!");s.r._removeExistingOffCanvas();const l=s.r._createOffCanvas(n,r,c,o);this.setContent(e,t,i,o,a),s.r._openOffcanvas(l)}static setContent(e,t,i,s,c){const l=new n.Z;super.setContent(`<div class="offcanvas-content-container">${o.Z.getTemplate()}</div>`,s,c),a&&a.abort();const f=e=>{super.setContent(e,s,c),"function"==typeof i&&i(e)};a=t?l.post(e,t,r.executeCallback.bind(this,f)):l.get(e,r.executeCallback.bind(this,f))}static executeCallback(e,t){"function"==typeof e&&e(t),window.PluginManager.initializePlugins()}}},3637:(e,t,i)=>{i.d(t,{Z:()=>f,r:()=>l});var s=i(9658),n=i(2005),o=i(1966);const a="offcanvas",r=350;class c{constructor(){this.$emitter=new n.Z}open(e,t,i,s,n,o,a){this._removeExistingOffCanvas();const r=this._createOffCanvas(i,o,a,s);this.setContent(e,s,n),this._openOffcanvas(r,t)}setContent(e,t,i){const s=this.getOffCanvas();s[0]&&(s[0].innerHTML=e,this._registerEvents(i))}setAdditionalClassName(e){this.getOffCanvas()[0].classList.add(e)}getOffCanvas(){return document.querySelectorAll(`.${a}`)}close(e){const t=this.getOffCanvas();o.Z.iterate(t,(e=>{bootstrap.Offcanvas.getInstance(e).hide()})),setTimeout((()=>{this.$emitter.publish("onCloseOffcanvas",{offCanvasContent:t})}),e)}goBackInHistory(){window.history.back()}exists(){return this.getOffCanvas().length>0}_openOffcanvas(e,t){c.bsOffcanvas.show(),window.history.pushState("offcanvas-open",""),"function"==typeof t&&t()}_registerEvents(e){const t=s.Z.isTouchDevice()?"touchend":"click",i=this.getOffCanvas();o.Z.iterate(i,(t=>{const s=()=>{setTimeout((()=>{t.remove(),this.$emitter.publish("onCloseOffcanvas",{offCanvasContent:i})}),e),t.removeEventListener("hide.bs.offcanvas",s)};t.addEventListener("hide.bs.offcanvas",s)})),window.addEventListener("popstate",this.close.bind(this,e),{once:!0});const n=document.querySelectorAll(".js-offcanvas-close");o.Z.iterate(n,(i=>i.addEventListener(t,this.close.bind(this,e))))}_removeExistingOffCanvas(){c.bsOffcanvas=null;const e=this.getOffCanvas();return o.Z.iterate(e,(e=>e.remove()))}_getPositionClass(e){return"left"===e?"offcanvas-start":"right"===e?"offcanvas-end":`offcanvas-${e}`}_createOffCanvas(e,t,i,s){const n=document.createElement("div");if(n.classList.add(a),n.classList.add(this._getPositionClass(e)),!0===t&&n.classList.add("is-fullwidth"),i){const e=typeof i;if("string"===e)n.classList.add(i);else{if(!Array.isArray(i))throw new Error(`The type "${e}" is not supported. Please pass an array or a string.`);i.forEach((e=>{n.classList.add(e)}))}}return document.body.appendChild(n),c.bsOffcanvas=new bootstrap.Offcanvas(n,{backdrop:!1!==s||"static"}),n}}const l=Object.freeze(new c);class f{static open(e,t=null,i="left",s=!0,n=350,o=!1,a=""){l.open(e,t,i,s,n,o,a)}static setContent(e,t=!0,i=350){l.setContent(e,t,i)}static setAdditionalClassName(e){l.setAdditionalClassName(e)}static close(e=350){l.close(e)}static exists(){return l.exists()}static getOffCanvas(){return l.getOffCanvas()}static REMOVE_OFF_CANVAS_DELAY(){return r}}}},e=>{e.O(0,["vendor-node","vendor-shared"],(()=>{return t=8206,e(e.s=t);var t}));e.O()}]);